{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import\"./Video.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatCount(count){const n=Number(count);if(isNaN(n))return\"0\";if(n>=1000000)return(n/1000000).toFixed(1)+\"M\";if(n>=1000)return(n/1000).toFixed(1)+\"K\";return n.toString();}function Video(_ref){let{url,channel,description,likes=0,dislikes=0,comments=0}=_ref;const[likeCount,setLikeCount]=useState(Number(likes));const[dislikeCount,setDislikeCount]=useState(Number(dislikes));const[isLiked,setIsLiked]=useState(false);const[isDisliked,setIsDisliked]=useState(false);const videoRef=useRef(null);// Автовоспроизведение при попадании в зону видимости\nuseEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;const video=videoRef.current;if(video){if(entry.isIntersecting){video.play().catch(()=>{});}else{video.pause();}}},{threshold:0.75});if(videoRef.current)observer.observe(videoRef.current);return()=>{if(videoRef.current)observer.unobserve(videoRef.current);};},[]);const onLike=()=>{if(isLiked){setLikeCount(prev=>prev-1);setIsLiked(false);}else{setLikeCount(prev=>prev+1);setIsLiked(true);if(isDisliked){setDislikeCount(prev=>prev-1);setIsDisliked(false);}}};const onDislike=()=>{if(isDisliked){setDislikeCount(prev=>prev-1);setIsDisliked(false);}else{setDislikeCount(prev=>prev+1);setIsDisliked(true);if(isLiked){setLikeCount(prev=>prev-1);setIsLiked(false);}}};const onComment=()=>{alert(\"Открытие комментариев — в разработке\");};const onShare=()=>{navigator.clipboard.writeText(window.location.href+url);alert(\"Ссылка скопирована!\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"video\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"video__player\",src:url,loop:true,muted:true,playsInline:true,controls:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`video__button ${isLiked?\"active\":\"\"}`,onClick:onLike,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/icons/like.svg\",alt:\"Like\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(likeCount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:`video__button ${isDisliked?\"active\":\"\"}`,onClick:onDislike,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/icons/dislike.svg\",alt:\"Dislike\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(dislikeCount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__button\",onClick:onComment,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/icons/comment.svg\",alt:\"Comment\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(comments)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__button\",onClick:onShare,children:/*#__PURE__*/_jsx(\"img\",{src:\"/icons/share.svg\",alt:\"Share\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video__channel\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",channel]}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__description\",children:description})]})]});}export default Video;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","formatCount","count","n","Number","isNaN","toFixed","toString","Video","_ref","url","channel","description","likes","dislikes","comments","likeCount","setLikeCount","dislikeCount","setDislikeCount","isLiked","setIsLiked","isDisliked","setIsDisliked","videoRef","observer","IntersectionObserver","_ref2","entry","video","current","isIntersecting","play","catch","pause","threshold","observe","unobserve","onLike","prev","onDislike","onComment","alert","onShare","navigator","clipboard","writeText","window","location","href","className","children","ref","src","loop","muted","playsInline","controls","onClick","alt"],"sources":["C:/Users/bulat/Desktop/ырщк/src/components/Video.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport \"./Video.css\";\r\n\r\nfunction formatCount(count) {\r\n  const n = Number(count);\r\n  if (isNaN(n)) return \"0\";\r\n  if (n >= 1_000_000) return (n / 1_000_000).toFixed(1) + \"M\";\r\n  if (n >= 1_000) return (n / 1_000).toFixed(1) + \"K\";\r\n  return n.toString();\r\n}\r\n\r\nfunction Video({ url, channel, description, likes = 0, dislikes = 0, comments = 0 }) {\r\n  const [likeCount, setLikeCount] = useState(Number(likes));\r\n  const [dislikeCount, setDislikeCount] = useState(Number(dislikes));\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [isDisliked, setIsDisliked] = useState(false);\r\n\r\n  const videoRef = useRef(null);\r\n\r\n  // Автовоспроизведение при попадании в зону видимости\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const video = videoRef.current;\r\n        if (video) {\r\n          if (entry.isIntersecting) {\r\n            video.play().catch(() => {});\r\n          } else {\r\n            video.pause();\r\n          }\r\n        }\r\n      },\r\n      {\r\n        threshold: 0.75,\r\n      }\r\n    );\r\n\r\n    if (videoRef.current) observer.observe(videoRef.current);\r\n\r\n    return () => {\r\n      if (videoRef.current) observer.unobserve(videoRef.current);\r\n    };\r\n  }, []);\r\n\r\n  const onLike = () => {\r\n    if (isLiked) {\r\n      setLikeCount(prev => prev - 1);\r\n      setIsLiked(false);\r\n    } else {\r\n      setLikeCount(prev => prev + 1);\r\n      setIsLiked(true);\r\n      if (isDisliked) {\r\n        setDislikeCount(prev => prev - 1);\r\n        setIsDisliked(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onDislike = () => {\r\n    if (isDisliked) {\r\n      setDislikeCount(prev => prev - 1);\r\n      setIsDisliked(false);\r\n    } else {\r\n      setDislikeCount(prev => prev + 1);\r\n      setIsDisliked(true);\r\n      if (isLiked) {\r\n        setLikeCount(prev => prev - 1);\r\n        setIsLiked(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onComment = () => {\r\n    alert(\"Открытие комментариев — в разработке\");\r\n  };\r\n\r\n  const onShare = () => {\r\n    navigator.clipboard.writeText(window.location.href + url);\r\n    alert(\"Ссылка скопирована!\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"video\">\r\n      <video\r\n        ref={videoRef}\r\n        className=\"video__player\"\r\n        src={url}\r\n        loop\r\n        muted\r\n        playsInline\r\n        controls={false}\r\n      />\r\n\r\n      <div className=\"video__sidebar\">\r\n        <div className={`video__button ${isLiked ? \"active\" : \"\"}`} onClick={onLike}>\r\n          <img src=\"/icons/like.svg\" alt=\"Like\" />\r\n          <span>{formatCount(likeCount)}</span>\r\n        </div>\r\n        <div className={`video__button ${isDisliked ? \"active\" : \"\"}`} onClick={onDislike}>\r\n          <img src=\"/icons/dislike.svg\" alt=\"Dislike\" />\r\n          <span>{formatCount(dislikeCount)}</span>\r\n        </div>\r\n        <div className=\"video__button\" onClick={onComment}>\r\n          <img src=\"/icons/comment.svg\" alt=\"Comment\" />\r\n          <span>{formatCount(comments)}</span>\r\n        </div>\r\n        <div className=\"video__button\" onClick={onShare}>\r\n          <img src=\"/icons/share.svg\" alt=\"Share\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"video__footer\">\r\n        <div className=\"video__channel\">\r\n          <p>@{channel}</p>\r\n          <button>Подписаться</button>\r\n        </div>\r\n        <div className=\"video__description\">{description}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Video;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}