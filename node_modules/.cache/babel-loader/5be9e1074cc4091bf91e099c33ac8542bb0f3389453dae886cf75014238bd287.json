{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import\"./Video.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Video(_ref){let{url,channel,description,likes,messages,shares,isAd,adLink,poster}=_ref;const videoRef=useRef(null);const[isMuted,setIsMuted]=useState(true);const[showMutedMessage,setShowMutedMessage]=useState(false);const[isActive,setIsActive]=useState(false);const[isLoading,setIsLoading]=useState(true);// Автовоспроизведение, пауза по вхождению в экран\nuseEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;const isVisible=entry.isIntersecting;setIsActive(isVisible);},{threshold:0.8});const el=videoRef.current;if(el)observer.observe(el);return()=>{if(el)observer.unobserve(el);};},[]);// Воспроизведение и остановка при активности\nuseEffect(()=>{const video=videoRef.current;if(!video)return;if(isActive){video.play().catch(e=>console.warn(\"play error\",e));}else{video.pause();video.currentTime=0;}},[isActive]);const handleClick=e=>{if(e.target.closest(\".video__sidebar\")||e.target.closest(\".video__footer\"))return;const video=videoRef.current;if(!video)return;const nextMuted=!video.muted;video.muted=nextMuted;setIsMuted(nextMuted);if(nextMuted){setShowMutedMessage(true);setTimeout(()=>setShowMutedMessage(false),1500);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"video\",onClick:handleClick,children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"video__loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"video__player\",src:url,poster:poster,playsInline:true,loop:true,muted:true,preload:\"auto\",onCanPlay:()=>setIsLoading(false),onWaiting:()=>setIsLoading(true)}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video__button\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",style:{fontSize:\"36px\"},children:\"thumb_up\"}),/*#__PURE__*/_jsx(\"span\",{children:likes})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__button\",children:/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",style:{fontSize:\"36px\"},children:\"thumb_down\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"video__button\",children:/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",style:{fontSize:\"36px\"},children:\"comment\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"video__button\",children:/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",style:{fontSize:\"36px\"},children:\"share\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__footer\",children:!isAd?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video__channel\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"@\",channel]}),/*#__PURE__*/_jsx(\"button\",{children:\"Abonnieren\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__description\",children:description})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"video__description\",children:description}),/*#__PURE__*/_jsx(\"a\",{href:adLink||\"#\",className:\"video__register-button centered\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Jetzt registrieren\"})]})}),showMutedMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"video__loading\",children:\"\\uD83D\\uDD07 Ton ist aus\"})]});}export default Video;","map":{"version":3,"names":["React","useRef","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Video","_ref","url","channel","description","likes","messages","shares","isAd","adLink","poster","videoRef","isMuted","setIsMuted","showMutedMessage","setShowMutedMessage","isActive","setIsActive","isLoading","setIsLoading","observer","IntersectionObserver","_ref2","entry","isVisible","isIntersecting","threshold","el","current","observe","unobserve","video","play","catch","e","console","warn","pause","currentTime","handleClick","target","closest","nextMuted","muted","setTimeout","className","onClick","children","ref","src","playsInline","loop","preload","onCanPlay","onWaiting","style","fontSize","href","rel"],"sources":["C:/Users/bulat/Desktop/ырщк/src/components/Video.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport \"./Video.css\";\r\n\r\nfunction Video({\r\n  url,\r\n  channel,\r\n  description,\r\n  likes,\r\n  messages,\r\n  shares,\r\n  isAd,\r\n  adLink,\r\n  poster,\r\n}) {\r\n  const videoRef = useRef(null);\r\n  const [isMuted, setIsMuted] = useState(true);\r\n  const [showMutedMessage, setShowMutedMessage] = useState(false);\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Автовоспроизведение, пауза по вхождению в экран\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const isVisible = entry.isIntersecting;\r\n        setIsActive(isVisible);\r\n      },\r\n      { threshold: 0.8 }\r\n    );\r\n\r\n    const el = videoRef.current;\r\n    if (el) observer.observe(el);\r\n\r\n    return () => {\r\n      if (el) observer.unobserve(el);\r\n    };\r\n  }, []);\r\n\r\n  // Воспроизведение и остановка при активности\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n\r\n    if (isActive) {\r\n      video.play().catch((e) => console.warn(\"play error\", e));\r\n    } else {\r\n      video.pause();\r\n      video.currentTime = 0;\r\n    }\r\n  }, [isActive]);\r\n\r\n  const handleClick = (e) => {\r\n    if (\r\n      e.target.closest(\".video__sidebar\") ||\r\n      e.target.closest(\".video__footer\")\r\n    )\r\n      return;\r\n\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n\r\n    const nextMuted = !video.muted;\r\n    video.muted = nextMuted;\r\n    setIsMuted(nextMuted);\r\n\r\n    if (nextMuted) {\r\n      setShowMutedMessage(true);\r\n      setTimeout(() => setShowMutedMessage(false), 1500);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"video\" onClick={handleClick}>\r\n      {isLoading && <div className=\"video__loading\">Загрузка...</div>}\r\n\r\n      <video\r\n        ref={videoRef}\r\n        className=\"video__player\"\r\n        src={url}\r\n        poster={poster}\r\n        playsInline\r\n        loop\r\n        muted\r\n        preload=\"auto\"\r\n        onCanPlay={() => setIsLoading(false)}\r\n        onWaiting={() => setIsLoading(true)}\r\n      />\r\n\r\n      <div className=\"video__sidebar\">\r\n        <div className=\"video__button\">\r\n          <span className=\"material-symbols-outlined\" style={{ fontSize: \"36px\" }}>thumb_up</span>\r\n          <span>{likes}</span>\r\n        </div>\r\n        <div className=\"video__button\">\r\n          <span className=\"material-symbols-outlined\" style={{ fontSize: \"36px\" }}>thumb_down</span>\r\n        </div>\r\n        <div className=\"video__button\">\r\n          <span className=\"material-symbols-outlined\" style={{ fontSize: \"36px\" }}>comment</span>\r\n        </div>\r\n        <div className=\"video__button\">\r\n          <span className=\"material-symbols-outlined\" style={{ fontSize: \"36px\" }}>share</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"video__footer\">\r\n        {!isAd ? (\r\n          <>\r\n            <div className=\"video__channel\">\r\n              <strong>@{channel}</strong>\r\n              <button>Abonnieren</button>\r\n            </div>\r\n            <div className=\"video__description\">{description}</div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"video__description\">{description}</div>\r\n            <a\r\n              href={adLink || \"#\"}\r\n              className=\"video__register-button centered\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Jetzt registrieren\r\n            </a>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {showMutedMessage && <div className=\"video__loading\">🔇 Ton ist aus</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Video;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}