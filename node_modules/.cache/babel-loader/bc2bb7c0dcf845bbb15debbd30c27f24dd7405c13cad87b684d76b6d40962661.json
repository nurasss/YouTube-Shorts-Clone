{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import\"./Video.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatCount(count){const num=Number(count.toString().replace(/[^\\d.]/g,\"\"));if(isNaN(num))return count;if(num>=1000000)return(num/1000000).toFixed(1)+\"M\";if(num>=1000)return(num/1000).toFixed(1)+\"K\";return num;}function Video(_ref){let{url,channel,description,likes=0,dislikes=0,comments=0}=_ref;const videoRef=useRef(null);const[isMuted,setIsMuted]=useState(true);const[likeCount,setLikeCount]=useState(Number(likes)||0);const[dislikeCount,setDislikeCount]=useState(Number(dislikes)||0);const[isLiked,setIsLiked]=useState(false);const[isDisliked,setIsDisliked]=useState(false);const onLike=()=>{setIsLiked(!isLiked);setLikeCount(prev=>isLiked?prev-1:prev+1);if(isDisliked){setIsDisliked(false);setDislikeCount(prev=>prev-1);}};const onDislike=()=>{setIsDisliked(!isDisliked);setDislikeCount(prev=>isDisliked?prev-1:prev+1);if(isLiked){setIsLiked(false);setLikeCount(prev=>prev-1);}};const onComment=()=>{alert(\"Комментарии пока не реализованы.\");};const onShare=()=>{navigator.clipboard.writeText(window.location.href);alert(\"Ссылка скопирована!\");};const toggleMute=()=>{if(videoRef.current){videoRef.current.muted=!videoRef.current.muted;setIsMuted(videoRef.current.muted);}};// Останавливает звук на других видео при переходе\nuseEffect(()=>{const videos=document.querySelectorAll(\"video\");videos.forEach(v=>{if(v!==videoRef.current)v.muted=true;});});return/*#__PURE__*/_jsxs(\"div\",{className:\"video\",onClick:toggleMute,children:[/*#__PURE__*/_jsx(\"video\",{className:\"video__player\",src:url,ref:videoRef,autoPlay:true,loop:true,muted:isMuted,playsInline:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`video__button ${isLiked?\"active\":\"\"}`,onClick:e=>{e.stopPropagation();onLike();},children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/icons/like.svg\",alt:\"Like\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(likeCount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:`video__button ${isDisliked?\"active\":\"\"}`,onClick:e=>{e.stopPropagation();onDislike();},children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/icons/dislike.svg\",alt:\"Dislike\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(dislikeCount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__button\",onClick:e=>{e.stopPropagation();onComment();},children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/icons/comment.svg\",alt:\"Comment\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCount(comments)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__button\",onClick:e=>{e.stopPropagation();onShare();},children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/icons/share.svg\",alt:\"Share\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video__footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video__channel\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",channel]}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video__description\",children:description})]})]});}export default Video;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","formatCount","count","num","Number","toString","replace","isNaN","toFixed","Video","_ref","url","channel","description","likes","dislikes","comments","videoRef","isMuted","setIsMuted","likeCount","setLikeCount","dislikeCount","setDislikeCount","isLiked","setIsLiked","isDisliked","setIsDisliked","onLike","prev","onDislike","onComment","alert","onShare","navigator","clipboard","writeText","window","location","href","toggleMute","current","muted","videos","document","querySelectorAll","forEach","v","className","onClick","children","src","ref","autoPlay","loop","playsInline","e","stopPropagation","process","env","PUBLIC_URL","alt"],"sources":["C:/Users/bulat/Desktop/ырщк/src/components/Video.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./Video.css\";\r\n\r\nfunction formatCount(count) {\r\n  const num = Number(count.toString().replace(/[^\\d.]/g, \"\"));\r\n  if (isNaN(num)) return count;\r\n  if (num >= 1_000_000) return (num / 1_000_000).toFixed(1) + \"M\";\r\n  if (num >= 1_000) return (num / 1_000).toFixed(1) + \"K\";\r\n  return num;\r\n}\r\n\r\nfunction Video({ url, channel, description, likes = 0, dislikes = 0, comments = 0 }) {\r\n  const videoRef = useRef(null);\r\n  const [isMuted, setIsMuted] = useState(true);\r\n  const [likeCount, setLikeCount] = useState(Number(likes) || 0);\r\n  const [dislikeCount, setDislikeCount] = useState(Number(dislikes) || 0);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [isDisliked, setIsDisliked] = useState(false);\r\n\r\n  const onLike = () => {\r\n    setIsLiked(!isLiked);\r\n    setLikeCount((prev) => (isLiked ? prev - 1 : prev + 1));\r\n    if (isDisliked) {\r\n      setIsDisliked(false);\r\n      setDislikeCount((prev) => prev - 1);\r\n    }\r\n  };\r\n\r\n  const onDislike = () => {\r\n    setIsDisliked(!isDisliked);\r\n    setDislikeCount((prev) => (isDisliked ? prev - 1 : prev + 1));\r\n    if (isLiked) {\r\n      setIsLiked(false);\r\n      setLikeCount((prev) => prev - 1);\r\n    }\r\n  };\r\n\r\n  const onComment = () => {\r\n    alert(\"Комментарии пока не реализованы.\");\r\n  };\r\n\r\n  const onShare = () => {\r\n    navigator.clipboard.writeText(window.location.href);\r\n    alert(\"Ссылка скопирована!\");\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.muted = !videoRef.current.muted;\r\n      setIsMuted(videoRef.current.muted);\r\n    }\r\n  };\r\n\r\n  // Останавливает звук на других видео при переходе\r\n  useEffect(() => {\r\n    const videos = document.querySelectorAll(\"video\");\r\n    videos.forEach((v) => {\r\n      if (v !== videoRef.current) v.muted = true;\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div className=\"video\" onClick={toggleMute}>\r\n      <video\r\n        className=\"video__player\"\r\n        src={url}\r\n        ref={videoRef}\r\n        autoPlay\r\n        loop\r\n        muted={isMuted}\r\n        playsInline\r\n      />\r\n\r\n      <div className=\"video__sidebar\">\r\n        <div className={`video__button ${isLiked ? \"active\" : \"\"}`} onClick={(e) => { e.stopPropagation(); onLike(); }}>\r\n          <img src={process.env.PUBLIC_URL + \"/icons/like.svg\"} alt=\"Like\" />\r\n          <span>{formatCount(likeCount)}</span>\r\n        </div>\r\n        <div className={`video__button ${isDisliked ? \"active\" : \"\"}`} onClick={(e) => { e.stopPropagation(); onDislike(); }}>\r\n          <img src={process.env.PUBLIC_URL + \"/icons/dislike.svg\"} alt=\"Dislike\" />\r\n          <span>{formatCount(dislikeCount)}</span>\r\n        </div>\r\n        <div className=\"video__button\" onClick={(e) => { e.stopPropagation(); onComment(); }}>\r\n          <img src={process.env.PUBLIC_URL + \"/icons/comment.svg\"} alt=\"Comment\" />\r\n          <span>{formatCount(comments)}</span>\r\n        </div>\r\n        <div className=\"video__button\" onClick={(e) => { e.stopPropagation(); onShare(); }}>\r\n          <img src={process.env.PUBLIC_URL + \"/icons/share.svg\"} alt=\"Share\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"video__footer\">\r\n        <div className=\"video__channel\">\r\n          <p>@{channel}</p>\r\n          <button>Подписаться</button>\r\n        </div>\r\n        <div className=\"video__description\">{description}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Video;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}